 <html xmlns:o="urn:schemas-microsoft-com:office:office"  xmlns:w="urn:schemas-microsoft-com:office:word"  xmlns="http://www.w3.org/TR/REC-html40">
                  <head>
                       <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
                       <xml><w:WordDocument><w:View>Print</w:View></xml>
                </head><body> 



<div class="problem">
	<div class="problem_top">
		<div class="problem_tops">
			<div class="pt_title" id="export_title">
				<span class="pt_title_left">知</span>
				<div class="pt_title2">
					<h1 class="title3_">ssh 登录linux主机时报错“PTY allocation request failed on channel 0”</h1>
					<div class="pt_title_bottom">
											<ul class="pt_title_label">
														<li><a href="/questions/catesDis/342">Linux系统调优</a></li>
													</ul>
											<div class="pt_tiitle_answer">
															<a href="/user/other/24417">贾雷</a>
							
						</div>
						<div class="pt_tiitle_time">2021-11-23</span>
												发表
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>			
	<div class="problem_content" >
		<div class="ppc">

			<div class="pp_answer_gg pc_content" >
				<div class="problem_problem problem_problem1" id="export_content">
					<div class="pp_content pp_kan">
																										<!-- update -->
							<h4 class="yanse" style="width: 100%;height: 30px;color: rgba(255,255,255,.9);line-height: 30px;font-size: 15px;text-indent: 8px;font-weight: 500;margin-bottom:3px">组网及说明</h4>
													
						<div style="margin-left:8px;margin-bottom:3px">
					
						<div a="true" style="width:100%; height:100%;"  ><p>无</p><p><br></p><p><span style="white-space: pre-wrap;">        </span></p><p>&nbsp;</p></div>
						</div>
																																<!-- update -->
							<h4 class="yanse" style="width: 100%;height: 30px;color: rgba(255,255,255,.9);line-height: 30px;font-size: 15px;text-indent: 8px;font-weight: 500;margin-bottom:3px">问题描述</h4>
													
						<div style="margin-left:8px;margin-bottom:3px">
					
						<div a="true" style="width:100%; height:100%;"  ><p>ssh登录linux主机时报错“PTY allocation request failed on channel 0”<br></p><p><br></p></div>
						</div>
																																<!-- update -->
							<h4 class="yanse" style="width: 100%;height: 30px;color: rgba(255,255,255,.9);line-height: 30px;font-size: 15px;text-indent: 8px;font-weight: 500;margin-bottom:3px">过程分析</h4>
													
						<div style="margin-left:8px;margin-bottom:3px">
					
						<div a="true" style="width:100%; height:100%;"  ><p>是由于&nbsp;系统当前使用的虚拟终端pty的数量已经达到了系统允许的上限。<br></p></div>
						</div>
																																<!-- update -->
							<h4 class="yanse" style="width: 100%;height: 30px;color: rgba(255,255,255,.9);line-height: 30px;font-size: 15px;text-indent: 8px;font-weight: 500;margin-bottom:3px">解决方法</h4>
													
						<div style="margin-left:8px;margin-bottom:3px">
					
						<div a="true" style="width:100%; height:100%;"  ><p>解决方法：</p><p>1：&nbsp;通过tty（接显示器）,&nbsp;管理口，登录主机，root执行 ps -ef|grep pts&nbsp; 找到&nbsp;使用虚拟终端的进程 ，看是否因程序异常造成使用这么多的pty,然后将异常进程杀掉。</p><p>2：&nbsp;或者&nbsp;通过修改&nbsp;系统允许的最大pty数量&nbsp;解决，</p><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 对当前运行的系统生效 echo&nbsp; &nbsp;5000&nbsp; &gt;&nbsp;/proc/sys/kernel/pty/max   ( rhel7下该值默认为 4096) </p><p>         永久生效方法： 将kernel.pty.max = 4096&nbsp; &nbsp; &nbsp;写入到/etc/sysctl.conf&nbsp; &nbsp;后执行sysctl -p&nbsp;让新配置生效果。</p></div>
						</div>
																	</div>
										<div class="pp_index">
						<ul class="ppi_ul">
													</ul>
					</div>
					
				</div>
			</div>
		</div>
	</div>

</body></html>